"use strict";(self["webpackChunksnack_party"]=self["webpackChunksnack_party"]||[]).push([[965],{1082:function(t,e,l){l.r(e),l.d(e,{default:function(){return Q}});var c=l(6768),a=l(5130),s=l(4232);const r=t=>((0,c.Qi)("data-v-2ab6c6d0"),t=t(),(0,c.jt)(),t),n=(0,c.Fv)('<div class="container-fluid page-header py-5" data-v-2ab6c6d0><h3 class="text-center text-white" data-v-2ab6c6d0>장바구니</h3><ol class="breadcrumb justify-content-center mb-0" data-v-2ab6c6d0><li class="breadcrumb-item" data-v-2ab6c6d0><a href="/productlist" data-v-2ab6c6d0>Product</a></li><li class="breadcrumb-item active text-white" data-v-2ab6c6d0>Cart</li></ol></div>',1),o={class:"container-fluid py-5"},i={class:"container py-5"},d={class:"table-responsive"},u={class:"table cart-list-table"},k=r((()=>(0,c.Lk)("th",{scope:"col"},"이미지",-1))),p=r((()=>(0,c.Lk)("th",{scope:"col"},"상품명",-1))),b=r((()=>(0,c.Lk)("th",{scope:"col"},"수량",-1))),L=r((()=>(0,c.Lk)("th",{scope:"col"},"가격",-1))),h=r((()=>(0,c.Lk)("th",{scope:"col"},"삭제",-1))),m=["value"],_=["src","onClick"],g={class:"mb-0 mt-4"},y={class:"input-group quantity mt-4",style:{width:"150px"}},f={class:"input-group-btn"},v=["onClick"],C=r((()=>(0,c.Lk)("i",{class:"fa fa-minus"},null,-1))),x=[C],$=["onUpdate:modelValue","disabled"],w={class:"input-group-btn"},P=["onClick","disabled"],F=r((()=>(0,c.Lk)("i",{class:"fa fa-plus"},null,-1))),I=[F],A={style:{"padding-left":"10px"}},S=["onClick"],U={class:"mb-0 mt-4"},O=["onClick"],V=r((()=>(0,c.Lk)("i",{class:"fa fa-times text-danger"},null,-1))),E=[V],X=r((()=>(0,c.Lk)("br",null,null,-1))),j={class:"container-fluid py-5"},q={id:"total",class:"table"},H=r((()=>(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"총 상품금액"),(0,c.Lk)("th",null,"배송비"),(0,c.Lk)("th",null,"결제예정금액")],-1))),J={class:"button-center"};function K(t,e,l,r,C,F){return(0,c.uX)(),(0,c.CE)(c.FK,null,[n,(0,c.Lk)("div",o,[(0,c.Lk)("div",i,[(0,c.Lk)("div",d,[(0,c.Lk)("table",u,[(0,c.Lk)("thead",null,[(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,[(0,c.bo)((0,c.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>F.selectAll=t)},null,512),[[a.lH,F.selectAll]])]),k,p,b,L,h])]),(0,c.Lk)("tbody",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(C.cartList,((l,r)=>((0,c.uX)(),(0,c.CE)("tr",{key:r},[(0,c.Lk)("td",null,[(0,c.bo)((0,c.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=t=>C.selectList=t),value:l},null,8,m),[[a.lH,C.selectList]])]),(0,c.Lk)("td",null,[(0,c.Lk)("img",{src:F.getImgUrl(C.cartList[r].path),width:"120px",class:"img-fluid rounded-top",onClick:t=>F.gotodetail(C.cartList[r].product_code)},null,8,_)]),(0,c.Lk)("td",null,[(0,c.Lk)("p",g,(0,s.v_)(l.product_name),1)]),(0,c.Lk)("td",null,[(0,c.Lk)("div",y,[(0,c.Lk)("div",f,[(0,c.Lk)("button",{class:"btn btn-sm btn-minus rounded-circle bg-light border",onClick:t=>l.cart_cnt<=1?l.cart_cnt:l.cart_cnt--},x,8,v)]),(0,c.bo)((0,c.Lk)("input",{type:"text",style:{background:"#fff"},class:"form-control form-control-sm text-center border-0",min:"1","onUpdate:modelValue":t=>l.cart_cnt=t,disabled:0==l.stock_cnt},null,8,$),[[a.Jo,l.cart_cnt]]),(0,c.Lk)("div",w,[(0,c.Lk)("button",{class:"btn btn-sm btn-plus rounded-circle bg-light border",onClick:t=>l.cart_cnt++,disabled:0==l.stock_cnt},I,8,P)]),(0,c.Lk)("div",A,[(0,c.Lk)("button",{type:"button",class:"cnt-update-btn btn-sm",onClick:t=>F.updateCnt(l)},"변경",8,S)])])]),(0,c.Lk)("td",null,[(0,c.Lk)("p",U,(0,s.v_)(t.$currencyFormat(l.cart_cnt*l.product_price))+"원 ",1)]),(0,c.Lk)("td",null,[(0,c.Lk)("button",{onClick:t=>F.delCartOne(l),class:"btn btn-md rounded-circle bg-light border mt-4"},E,8,O)])])))),128))])])]),X,(0,c.Lk)("div",j,[(0,c.Lk)("table",q,[H,(0,c.Lk)("tr",null,[(0,c.Lk)("td",null,(0,s.v_)(t.$currencyFormat(F.allProPrice()))+"원",1),(0,c.Lk)("td",null,"+ "+(0,s.v_)(t.$currencyFormat(F.deliveryFee))+"원",1),(0,c.Lk)("td",null,"= "+(0,s.v_)(t.$currencyFormat(F.allProPrice()+F.deliveryFee))+"원",1)])])]),(0,c.Lk)("div",J,[(0,c.Lk)("button",{onClick:e[2]||(e[2]=t=>F.goToCheckOut()),class:"btn border-secondary rounded-pill px-4 py-3 text-primary text-uppercase mb-4 ms-4 ordBtn"}," 선택상품 주문하기 "),(0,c.Lk)("button",{onClick:e[3]||(e[3]=t=>F.deleteSelected()),class:"del-btn btn border-secondary rounded-pill px-4 py-3 text-primary text-uppercase mb-4 ms-4",type:"button"}," 장바구니 비우기 ")])])])],64)}l(4114),l(4603),l(7566),l(8721);var R=l(8355),T={data(){return{cartList:[],totalPrice:0,selectList:[],disabled:!1,memId:this.$store.state.memberStore.memberInfo.member_id,loginStatus:this.$store.state.memberStore.loginStatus}},created(){this.getCartList(this.memId)},computed:{deliveryFee(){return this.totalPrice>=3e4?0:3e3},selectAll:{get:function(){return this.cartList.length==this.selectList.length},set(t){this.selectList=t?this.cartList:[]}}},methods:{async getCartList(t){let e=await R.A.get("/apiorder/carts/"+t).catch((t=>console.log(t)));console.log("result : ",e);let l=e.data;this.cartList=l},getImgUrl(t){return t?new URL(this.url+"/common/download?path="+t):""},async updateCnt(t){if(t.stock_cnt>=t.cart_cnt){let e=await R.A.put(`/apiorder/carts/${t.cart_cnt}/${t.cart_code}`).catch((t=>console.log(t))),l=e.data.changedRows;l>0&&alert("수정되었습니다.")}else 0==t.stock_cnt?(alert("품절된 상품으로 주문이 불가합니다."),t.cart_cnt=t.stock_cnt):(alert(t.product_name+"의 재고량이 부족합니다. 주문가능한 수량은 "+t.stock_cnt+"개 입니다."),t.cart_cnt=t.stock_cnt)},allProPrice(){let t=0;for(let e of this.selectList)t+=e.product_price*e.cart_cnt;return this.totalPrice=t},async delCartOne(t){await R.A.delete(`/apiorder/carts/${t.cart_code}`).catch((t=>console.log(t))),this.$router.go(0)},async deleteSelected(){if(0==this.selectList.length)alert("삭제할 상품을 선택해주세요.");else{for(let t of this.selectList)await R.A.delete(`/apiorder/carts/${t.cart_code}`).catch((t=>console.log(t)));alert("삭제되었습니다."),this.$router.go(0)}},goToCheckOut(){0==this.selectList.length&&alert("주문하실 상품을 선택해주세요.");for(let t of this.selectList)t.stock_cnt<t.cart_cnt?(alert(t.product_name+"의 재고량이 부족합니다.\n주문가능한 수량은 "+t.stock_cnt+"개로 수량이 변경됩니다."),t.cart_cnt=t.stock_cnt):(sessionStorage.setItem("carts",JSON.stringify(this.selectList)),this.$router.push({path:"/checkout"}))},gotodetail(t){this.$router.push({name:"ProductInfo",query:{product_code:t}})}}},B=l(1241);const N=(0,B.A)(T,[["render",K],["__scopeId","data-v-2ab6c6d0"]]);var Q=N}}]);
//# sourceMappingURL=Cart.a226903a.js.map