"use strict";(self["webpackChunksnack_party"]=self["webpackChunksnack_party"]||[]).push([[735],{1068:function(t,e,l){l.d(e,{A:function(){return f}});var r=l(6768),o=l(4232);const i=t=>((0,r.Qi)("data-v-4641d4fc"),t=t(),(0,r.jt)(),t),n={class:"table-responsive"},s={class:"table"},a=i((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"이미지"),(0,r.Lk)("th",{scope:"col"},"상품명"),(0,r.Lk)("th",{scope:"col"},"상품가격"),(0,r.Lk)("th",{scope:"col"},"수량"),(0,r.Lk)("th",{scope:"col"},"총 가격")])],-1))),c={scope:"row"},d={class:"d-flex align-items-center mt-2"},u=["src"],p={class:"py-5"},h={class:"py-5"},k={class:"py-5"},L={class:"py-5"};function y(t,e,l,i,y,v){return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("table",s,[a,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.checkOutList,((e,i)=>((0,r.uX)(),(0,r.CE)("tr",{key:i},[(0,r.Lk)("th",c,[(0,r.Lk)("div",d,[(0,r.Lk)("img",{src:v.getImgUrl(l.checkOutList[i].path),width:"100px",class:"img-fluid rounded-top",alt:""},null,8,u)])]),(0,r.Lk)("td",p,(0,o.v_)(e.product_name),1),(0,r.Lk)("td",h,(0,o.v_)(t.$currencyFormat(e.product_price))+"원",1),(0,r.Lk)("td",k,(0,o.v_)(e.cart_cnt)+"개",1),(0,r.Lk)("td",L,(0,o.v_)(t.$currencyFormat(e.product_price*e.cart_cnt))+"원",1)])))),128))])])])}l(4603),l(7566),l(8721);var v={props:{checkOutList:Array},methods:{getImgUrl(t){return new URL(this.url+"/common/download?path="+t)}}},_=l(1241);const m=(0,_.A)(v,[["render",y],["__scopeId","data-v-4641d4fc"]]);var f=m},7007:function(t,e,l){l.d(e,{A:function(){return w}});var r=l(6768),o=l(4232),i=l(5130);const n=t=>((0,r.Qi)("data-v-3ece809e"),t=t(),(0,r.jt)(),t),s={class:"table-responsive"},a={class:"table"},c=n((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col",colspan:"5"},"결제정보")])],-1))),d=n((()=>(0,r.Lk)("td",null,"주문상품 금액",-1))),u={key:0},p={key:1},h=n((()=>(0,r.Lk)("br",null,null,-1))),k={key:2},L=n((()=>(0,r.Lk)("td",null,"배송비",-1))),y=n((()=>(0,r.Lk)("td",null,"최종결제 금액",-1))),v={key:0},_={key:1},m=n((()=>(0,r.Lk)("br",null,null,-1))),f={class:"table-responsive"},b={key:0,class:"table"},g=n((()=>(0,r.Lk)("tr",null,[(0,r.Lk)("td",{colspan:"2"})],-1))),P=n((()=>(0,r.Lk)("td",null,"구매적립액",-1))),I={key:1},F=n((()=>(0,r.Lk)("br",null,null,-1)));function O(t,e,l,n,O,C){return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("table",a,[c,(0,r.Lk)("tbody",null,[(0,r.Lk)("tr",null,[d,(0,r.Lk)("td",null,(0,o.v_)(t.$currencyFormat(l.allPrice))+"원",1)]),(0,r.Lk)("tr",null,[0!=C.minus_point?((0,r.uX)(),(0,r.CE)("td",u,"적립금 사용")):(0,r.Q3)("",!0),1==l.pointInput?((0,r.uX)(),(0,r.CE)("td",p,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>O.usePoint=t),onInput:e[1]||(e[1]=t=>C.point())},null,544),[[i.Jo,O.usePoint]]),(0,r.eW)("원 "),(0,r.Lk)("button",{type:"button",class:"cnt-update-btn btn-sm",onClick:e[2]||(e[2]=t=>O.usePoint=l.point_value)},"모두사용"),h,(0,r.eW)("보유적립금: "+(0,o.v_)(t.$currencyFormat(l.point_value-O.usePoint))+"원 ",1)])):0!=C.minus_point&&0==l.pointInput?((0,r.uX)(),(0,r.CE)("td",k,"- "+(0,o.v_)(C.minus_point)+"원",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("tr",null,[L,(0,r.Lk)("td",null,(0,o.v_)(t.$currencyFormat(C.deliveryFee))+"원",1)]),(0,r.Lk)("tr",null,[y,1==l.pointInput?((0,r.uX)(),(0,r.CE)("td",v,(0,o.v_)(t.$currencyFormat(C.totalPrice))+"원",1)):((0,r.uX)(),(0,r.CE)("td",_,(0,o.v_)(t.$currencyFormat(C.totalPrice-C.minus_point))+"원",1))])])]),m,(0,r.Lk)("div",f,[1==l.completepoint?((0,r.uX)(),(0,r.CE)("table",b,[(0,r.Lk)("tbody",null,[g,(0,r.Lk)("tr",null,[P,(0,r.Lk)("td",null,(0,o.v_)(t.$currencyFormat(C.plus_point))+"원",1)])])])):((0,r.uX)(),(0,r.CE)("p",I))]),F])}var C={props:{checkOutList:Array,allPrice:Number,point_value:Number,pointList:Array,pointInput:Boolean,completepoint:Boolean},emits:["usePoint","deliveryFee"],data(){return{usePoint:0,order_status:""}},computed:{minus_point(){let t=0;if(null!=this.pointList){for(let e=0;e<this.pointList.length;e++)"d02"==this.pointList[e].point_status&&null==this.pointList[e].review_code&&(t=this.pointList[e].point_value);return t}},plus_point(){let t=0;if(null!=this.pointList){for(let e=0;e<this.pointList.length;e++){if("d01"!=this.pointList[e].point_status||null!=this.pointList[e].review_code)return;t=this.pointList[e].point_value}return t}},totalPrice(){return this.allPrice-this.usePoint+this.deliveryFee},deliveryFee(){return this.allPrice>=3e4?0:3e3}},created(){this.$emit("deliveryFee",this.deliveryFee),this.orderStatus(),console.log(this.plus_point)},updated(){this.$emit("usePoint",this.usePoint),this.$emit("totalPrice",this.totalPrice)},methods:{point(){(this.usePoint>this.point_value||this.usePoint<0)&&(alert("보유적립금을 확인해 주세요"),this.usePoint=0)},orderStatus(){for(let t of this.checkOutList)this.order_status=t.order_status}}},x=l(1241);const $=(0,x.A)(C,[["render",O],["__scopeId","data-v-3ece809e"]]);var w=$},8737:function(t,e,l){l.r(e),l.d(e,{default:function(){return N}});l(4114);var r=l(6768),o=l(4232);const i=t=>((0,r.Qi)("data-v-aea20e74"),t=t(),(0,r.jt)(),t),n=(0,r.Fv)('<div class="container-fluid page-header py-5" data-v-aea20e74><h3 class="text-center text-white" data-v-aea20e74>주문상세</h3><ol class="breadcrumb justify-content-center mb-0" data-v-aea20e74><li class="breadcrumb-item" data-v-aea20e74><a href="/productlist" data-v-aea20e74>Product</a></li><li class="breadcrumb-item active text-white" data-v-aea20e74>MyOrder_detail</li></ol></div>',1),s={class:"container-fluid py-5"},a={class:"container py-5"},c=i((()=>(0,r.Lk)("h3",null,"주문상세내역",-1))),d=i((()=>(0,r.Lk)("br",null,null,-1))),u={class:"right-div"},p={class:"col-md-12 col-lg-6 col-xl-7"},h={class:"table-responsive"},k={class:"table"},L=i((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("th",{style:{"font-size":"15px"}},"주문상태"),(0,r.Lk)("th",{style:{"font-size":"15px","padding-left":"20px"}},"리뷰")],-1))),y={class:"py-5"},v={class:"py-5"},_=["onClick"],m=i((()=>(0,r.Lk)("br",null,null,-1))),f=i((()=>(0,r.Lk)("br",null,null,-1))),b={class:"right-div"},g={class:"col-md-12 col-lg-6 col-xl-5"},P={class:"col-md-12 col-lg-6 col-xl-5"},I={class:"table-responsive",style:{"margin-left":"70px"}},F={class:"table"},O=i((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col",colspan:"5",style:{"font-size":"16px"}},"배송정보")])],-1))),C=i((()=>(0,r.Lk)("td",null,"운송장 번호 ",-1))),x=i((()=>(0,r.Lk)("td",null,"수령인 ",-1))),$=i((()=>(0,r.Lk)("td",null,"연락처 ",-1))),w=i((()=>(0,r.Lk)("td",{rowspan:"2"},"주소 ",-1))),E={key:0},X={key:1},D={key:0},A={key:1},Q=i((()=>(0,r.Lk)("br",null,null,-1))),U=i((()=>(0,r.Lk)("div",null,null,-1))),S=i((()=>(0,r.Lk)("br",null,null,-1))),j={style:{"text-align":"center"}};function M(t,e,l,i,M,R){const T=(0,r.g2)("OrderProducts"),z=(0,r.g2)("PaymentInfo");return(0,r.uX)(),(0,r.CE)(r.FK,null,[n,(0,r.Lk)("div",s,[(0,r.Lk)("div",a,[c,d,(0,r.Lk)("div",u,[(0,r.Lk)("div",p,[(0,r.bF)(T,{checkOutList:M.myOrdDetail},null,8,["checkOutList"])]),(0,r.Lk)("div",h,[(0,r.Lk)("table",k,[L,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(M.myOrdDetail,((t,e)=>((0,r.uX)(),(0,r.CE)("tr",{key:e},[(0,r.Lk)("td",y,(0,o.v_)(R.ordStatus(t.order_status)),1),(0,r.Lk)("td",v,[(0,r.Lk)("button",{type:"button",class:"btn btn-sm border-secondary rounded-pill px-2 py-2 text-primary ms-2",onClick:e=>R.goToReviewInsert(t.detail_code)},"리뷰작성",8,_)])])))),128))])])])]),m,f,(0,r.Lk)("div",b,[(0,r.Lk)("div",g,[(0,r.bF)(z,{checkOutList:M.myOrdDetail,pointList:M.pointList,allPrice:R.allProPrice,completepoint:M.completepoint,onUsePoint:R.usePoint,onDeliveryFee:R.deliveryFee,onTotalPrice:R.totalPrice},null,8,["checkOutList","pointList","allPrice","completepoint","onUsePoint","onDeliveryFee","onTotalPrice"])]),(0,r.Lk)("div",P,[(0,r.Lk)("div",I,[(0,r.Lk)("table",F,[O,(0,r.Lk)("tbody",null,[(0,r.Lk)("tr",null,[C,(0,r.Lk)("td",null,(0,o.v_)(M.deliveryInfo.delivery_num),1)]),(0,r.Lk)("tr",null,[x,(0,r.Lk)("td",null,(0,o.v_)(M.deliveryInfo.recipient),1)]),(0,r.Lk)("tr",null,[$,(0,r.Lk)("td",null,(0,o.v_)(M.deliveryInfo.rec_phone),1)]),(0,r.Lk)("tr",null,[w,(0,r.Lk)("td",null,(0,o.v_)(M.deliveryInfo.rec_postcode),1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,(0,o.v_)(M.deliveryInfo.rec_address)+(0,o.v_)(M.deliveryInfo.rec_address_detail),1)]),(0,r.Lk)("tr",null,[null!=M.deliveryInfo.rec_email?((0,r.uX)(),(0,r.CE)("td",E,"이메일 ")):(0,r.Q3)("",!0),null!=M.deliveryInfo.rec_email?((0,r.uX)(),(0,r.CE)("td",X,(0,o.v_)(M.deliveryInfo.rec_email),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("tr",null,[null!=M.deliveryInfo.memo?((0,r.uX)(),(0,r.CE)("td",D,"배송메모 ")):(0,r.Q3)("",!0),null!=M.deliveryInfo.memo?((0,r.uX)(),(0,r.CE)("td",A,(0,o.v_)(M.deliveryInfo.memo),1)):(0,r.Q3)("",!0)])])])])]),Q,U]),S,(0,r.Lk)("div",j,[(0,r.Lk)("button",{onClick:e[0]||(e[0]=t=>R.cancelOrd()),class:"btn border-secondary rounded-pill px-4 py-2 text-primary text-uppercase mb-4 ms-4"},"주문취소"),(0,r.Lk)("button",{onClick:e[1]||(e[1]=t=>this.$router.push({path:"/myorderlist"})),class:"btn border-secondary rounded-pill px-4 py-2 text-primary text-uppercase mb-4 ms-4"},"주문목록 이동")])])])],64)}var R=l(8355),T=l(1068),z=l(7007),K={data(){return{myOrdDetail:[],order_code:"",merchant_uid:"",userInfo:{},mem_code:this.$store.state.memberStore.memberInfo.member_code,use_point:0,delivery_fee:0,total_price:0,pointInput:!1,pointList:[],deliveryInfo:{},completepoint:!0}},components:{OrderProducts:T.A,PaymentInfo:z.A},created(){this.order_code=this.$route.query.order_code,this.getMyOrdDetail(),this.getPointInfo(),this.getDeliveryInfo(),this.getMyOrdDetail()},computed:{allProPrice(){let t=0;for(let e of this.myOrdDetail)t+=e.product_price*e.cart_cnt;return t}},methods:{async getMyOrdDetail(){let t=await R.A.get(`/apiorder/myord/details/${this.order_code}/${this.mem_code}`).catch((t=>console.log(t)));console.log("result : ",t),this.myOrdDetail=this.changeField(t.data)},changeField(t){let e=[];for(let l of t)e.push({detail_code:l.detail_code,order_code:l.order_code,product_price:l.product_price,cart_cnt:l.order_cnt,detail_price:l.detail_price,product_name:l.product_name,path:l.path,order_status:l.order_status});return e},async getPointInfo(){let t=await R.A.get(`/apiorder/myord/details/point/${this.order_code}/${this.mem_code}`).catch((t=>console.log(t)));console.log("주문 후 포인트내역? detail : ",t),this.pointList=t.data},async getDeliveryInfo(){let t=await R.A.get(`/apiorder/myord/details/delivery/info/${this.order_code}`).catch((t=>console.log(t)));console.log("주문 후 배송정보? ",t);let e=t.data;this.deliveryInfo=e},ordStatus(t){return"h01"==t?"결제완료":"h02"==t?"주문취소":"h03"==t?"배송준비중":"h04"==t?"배송중":"h05"==t?"배송완료":"h06"==t?"반품취소":"h07"==t?"반품완료":"환불완료"},async cancelOrd(){for(let t=0;t<this.myOrdDetail.length;t++)if("h01"==this.myOrdDetail[t].order_status){let t=await R.A.put(`/apiorder/myord/cancel/${this.order_code}`).catch((t=>console.log(t))),e=t.data.changedRows;e>0&&(alert("주문이 취소되었습니다."),this.$router.go(0))}else"h02"==this.myOrdDetail[t].order_status?alert("이미 주문취소된 상품입니다."):alert("주문취소가 불가합니다.")},goToReviewInsert(t){this.$router.push({path:"/reviewInsert",query:{detail_code:t}})},usePoint(t){this.use_point=t},deliveryFee(t){this.delivery_fee=t},totalPrice(t){this.total_price=t}}},q=l(1241);const B=(0,q.A)(K,[["render",M],["__scopeId","data-v-aea20e74"]]);var N=B}}]);
//# sourceMappingURL=MyOrderDetail.b420de03.js.map