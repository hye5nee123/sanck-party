"use strict";(self["webpackChunksnack_party"]=self["webpackChunksnack_party"]||[]).push([[5],{8903:function(e,t,l){l.r(t),l.d(t,{default:function(){return U}});var o=l(6768),c=l(5130),s=l(4232);const a=e=>((0,o.Qi)("data-v-4e3f0f7e"),e=e(),(0,o.jt)(),e),r=(0,o.Fv)('<div class="container-fluid page-header py-5" data-v-4e3f0f7e><h3 class="text-center text-white" data-v-4e3f0f7e>찜 상품</h3><ol class="breadcrumb justify-content-center mb-0" data-v-4e3f0f7e><li class="breadcrumb-item" data-v-4e3f0f7e><a href="/productlist" data-v-4e3f0f7e>Product</a></li><li class="breadcrumb-item active text-white" data-v-4e3f0f7e>Like</li></ol></div>',1),i={class:"container-fluid py-5"},d={class:"container py-5"},n={class:"table-responsive"},u={class:"table cart-list-table"},p=a((()=>(0,o.Lk)("th",{scope:"col"},"이미지",-1))),k=a((()=>(0,o.Lk)("th",{scope:"col"},"상품명",-1))),m=a((()=>(0,o.Lk)("th",{scope:"col"},"가격",-1))),h=a((()=>(0,o.Lk)("th",{scope:"col"},"삭제",-1))),L=["value"],b=["src","onClick"],f={class:"mb-0 mt-4"},g={class:"mb-0 mt-4"},_=["onClick"],v=a((()=>(0,o.Lk)("i",{class:"fa fa-times text-danger"},null,-1))),y=[v],x=a((()=>(0,o.Lk)("br",null,null,-1))),C={class:"button-center"};function w(e,t,l,a,v,w){return(0,o.uX)(),(0,o.CE)(o.FK,null,[r,(0,o.Lk)("div",i,[(0,o.Lk)("div",d,[(0,o.Lk)("div",n,[(0,o.Lk)("table",u,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>w.selectAll=e)},null,512),[[c.lH,w.selectAll]])]),p,k,m,h])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(v.likeList,((l,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:a},[(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>v.selectList=e),value:l},null,8,L),[[c.lH,v.selectList]])]),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:w.getImgUrl(v.likeList[a].path),width:"120px",class:"img-fluid rounded-top",onClick:e=>w.gotodetail(v.likeList[a].product_code)},null,8,b)]),(0,o.Lk)("td",null,[(0,o.Lk)("p",f,(0,s.v_)(l.product_name),1)]),(0,o.Lk)("td",null,[(0,o.Lk)("p",g,(0,s.v_)(e.$currencyFormat(l.product_price))+"원 ",1)]),(0,o.Lk)("td",null,[(0,o.Lk)("button",{onClick:e=>w.delLikeOne(l),class:"btn btn-md rounded-circle bg-light border mt-4"},y,8,_)])])))),128))])])]),x,(0,o.Lk)("div",C,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>w.addToCart()),class:"btn border-secondary rounded-pill px-4 py-3 text-primary text-uppercase mb-4 ms-4 ordBtn"}," 장바구니 담기 "),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>w.deleteSelected()),class:"btn border-secondary rounded-pill px-4 py-3 text-primary text-uppercase mb-4 ms-4",type:"button"}," 찜 상품 비우기 ")])])])],64)}l(4114),l(4603),l(7566),l(8721);var $=l(8355),A={data(){return{likeList:[],selectList:[],mem_code:this.$store.state.memberStore.memberInfo.member_code,loginStatus:this.$store.state.memberStore.loginStatus}},created(){this.getLikeList(this.mem_code)},computed:{selectAll:{get:function(){return this.likeList.length==this.selectList.length},set(e){this.selectList=e?this.likeList:[]}}},methods:{async getLikeList(e){let t=await $.A.get("/apiorder/likes/"+e).catch((e=>console.log(e)));console.log("result : ",t);let l=t.data;this.likeList=l},getImgUrl(e){return e?new URL(this.url+"/common/download?path="+e):""},async addToCart(){if(0!=this.selectList.length){for(let e of this.selectList){if(e.stock_cnt<1)return void alert(e.product_name+"의 재고가 없습니다.\n해당 상품 선택을 취소 후 다시 담아주세요.");{console.log(e.product_code);let t=await $.A.get(`/apiorder/carts/${this.mem_code}/${e.product_code}`).catch((e=>console.log(e)));console.log("??",t),console.log("???",t.data.length);let l="";if(1==t.data.length){let o=t.data[0].product_code;return e.product_code==o&&(l=e.product_name),void alert(l+"는 이미 장바구니에 담긴 상품입니다.\n해당 상품 선택을 취소 후 다시 담아주세요.")}}let t={param:{cart_cnt:1,member_code:this.mem_code,product_code:e.product_code}};console.log("selLike? ",e.product_code);let l=await $.A.post("/apiorder/carts",t).catch((e=>console.log(e)));console.log("장바구니등록"+l)}alert("장바구니에 추가되었습니다.")}else alert("장바구니에 담을 상품을 선택해주세요.")},async delLikeOne(e){await $.A.delete(`/apiorder/likes/${this.mem_code}/${e.product_code}`).catch((e=>console.log(e))),this.$router.go(0)},async deleteSelected(){if(0==this.selectList.length)alert("삭제할 상품을 선택해주세요.");else{for(let e of this.selectList)await $.A.delete(`/apiorder/likes/${this.mem_code}/${e.product_code}`).catch((e=>console.log(e)));alert("삭제되었습니다."),this.$router.go(0)}},gotodetail(e){this.$router.push({name:"ProductInfo",query:{product_code:e}})}}},I=l(1241);const S=(0,I.A)(A,[["render",w],["__scopeId","data-v-4e3f0f7e"]]);var U=S}}]);
//# sourceMappingURL=Likes.44bd85bc.js.map